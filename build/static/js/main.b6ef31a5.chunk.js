(this.webpackJsonpclient = this.webpackJsonpclient || []).push([[0], { 108: function (e, t, n) { }, 563: function (e, t, n) { }, 565: function (e, t, n) { "use strict"; n.r(t); var a = n(1), r = n.n(a), o = n(73), i = n.n(o), c = n(134), s = n(25), l = n(7), d = n(625), u = n(605), j = n(627), b = n(607), p = n(173), h = n(622), x = n(170), f = n.n(x), v = n(133), m = n(82), O = n(168), g = n(15), y = n(626), k = function () { return Object(c.b)() }, w = c.c, C = n(6), S = n(3), U = n.n(S), I = n(29), D = n.n(I), E = n(59), N = (localStorage.getItem("openDrawer"), Object(E.b)("messsages/data", function () { var e = Object(C.a)(U.a.mark((function e(t) { var n; return U.a.wrap((function (e) { for (; ;)switch (e.prev = e.next) { case 0: return e.next = 2, D.a.get("https://enigmatic-garden-12643.herokuapp.com/chat/".concat(t)); case 2: return n = e.sent, e.abrupt("return", n.data); case 4: case "end": return e.stop() } }), e) }))); return function (t) { return e.apply(this, arguments) } }())), R = Object(E.b)("allusers/data", Object(C.a)(U.a.mark((function e() { var t; return U.a.wrap((function (e) { for (; ;)switch (e.prev = e.next) { case 0: return e.next = 2, D.a.get("https://enigmatic-garden-12643.herokuapp.com/users"); case 2: return t = e.sent, e.abrupt("return", t.data); case 4: case "end": return e.stop() } }), e) })))), L = Object(E.b)("allgroups/data", Object(C.a)(U.a.mark((function e() { var t; return U.a.wrap((function (e) { for (; ;)switch (e.prev = e.next) { case 0: return e.next = 2, D.a.get("https://enigmatic-garden-12643.herokuapp.com/group"); case 2: return t = e.sent, e.abrupt("return", t.data); case 4: case "end": return e.stop() } }), e) })))), A = Object(E.b)("deletemessage/data", function () { var e = Object(C.a)(U.a.mark((function e(t) { var n; return U.a.wrap((function (e) { for (; ;)switch (e.prev = e.next) { case 0: return e.next = 2, D.a.put("https://enigmatic-garden-12643.herokuapp.com/chat/deletemessage/".concat(t)); case 2: return n = e.sent, e.abrupt("return", n.data); case 4: case "end": return e.stop() } }), e) }))); return function (t) { return e.apply(this, arguments) } }()), F = Object(E.b)("deleteallmessage/data", function () { var e = Object(C.a)(U.a.mark((function e(t) { var n; return U.a.wrap((function (e) { for (; ;)switch (e.prev = e.next) { case 0: return e.next = 2, D.a.delete("https://enigmatic-garden-12643.herokuapp.com/chat/deleteallmessages/".concat(t)); case 2: return n = e.sent, e.abrupt("return", n.data); case 4: case "end": return e.stop() } }), e) }))); return function (t) { return e.apply(this, arguments) } }()), _ = Object(E.b)("updateUserName/data", function () { var e = Object(C.a)(U.a.mark((function e(t) { var n; return U.a.wrap((function (e) { for (; ;)switch (e.prev = e.next) { case 0: return e.next = 2, D.a.put("https://enigmatic-garden-12643.herokuapp.com/users/updatename/".concat(t.uid), t); case 2: return n = e.sent, e.abrupt("return", n.data); case 4: case "end": return e.stop() } }), e) }))); return function (t) { return e.apply(this, arguments) } }()), M = Object(E.b)("updateUserNumber/data", function () { var e = Object(C.a)(U.a.mark((function e(t) { var n; return U.a.wrap((function (e) { for (; ;)switch (e.prev = e.next) { case 0: return e.next = 2, D.a.put("https://enigmatic-garden-12643.herokuapp.com/users/updatennumber/".concat(t.uid), t); case 2: return n = e.sent, e.abrupt("return", n.data); case 4: case "end": return e.stop() } }), e) }))); return function (t) { return e.apply(this, arguments) } }()), G = Object(E.b)("updateUserAddress/data", function () { var e = Object(C.a)(U.a.mark((function e(t) { var n; return U.a.wrap((function (e) { for (; ;)switch (e.prev = e.next) { case 0: return e.next = 2, D.a.put("https://enigmatic-garden-12643.herokuapp.com/users/updatenaddress/".concat(t.uid), t); case 2: return n = e.sent, e.abrupt("return", n.data); case 4: case "end": return e.stop() } }), e) }))); return function (t) { return e.apply(this, arguments) } }()), z = Object(E.b)("updateUserProfession/data", function () { var e = Object(C.a)(U.a.mark((function e(t) { var n; return U.a.wrap((function (e) { for (; ;)switch (e.prev = e.next) { case 0: return e.next = 2, D.a.put("https://enigmatic-garden-12643.herokuapp.com/users/updatenprofession/".concat(t.uid), t); case 2: return n = e.sent, e.abrupt("return", n.data); case 4: case "end": return e.stop() } }), e) }))); return function (t) { return e.apply(this, arguments) } }()), P = Object(E.c)({ name: "dataSlice", initialState: { value: 0, status: "idle", messagedataLoading: !0, loginUser: {}, allUsers: [], usersDataLoading: !0, convertationUsers: [], selectedUser: {}, selectedGroupMembers: [], allGroups: [], groupsDataLoading: !0, selectedGroup: {}, messages: [], messageDataLoading: !0, groupChat: [], createdGroup: {}, joinedGroups: [], searchText: "", updateUserInfo: "", deleteTextLoading: !0, allMessageDeleteLoading: !0, openDetailsSection: !0 }, reducers: { currentLoginUser: function (e, t) { e.loginUser = t.payload }, myConvertations: function (e, t) { e.convertationUsers = t.payload }, selectUser: function (e, t) { e.selectedUser = t.payload }, addGroupMembers: function (e, t) { e.selectedGroupMembers.push(t.payload) }, removeFromSelectedPeople: function (e, t) { e.selectedGroupMembers = e.selectedGroupMembers.filter((function (e) { return (null === e || void 0 === e ? void 0 : e.uid) !== t.payload })) }, reseatGroupMembers: function (e, t) { e.selectedGroupMembers = [], e.selectedGroup = {} }, selectGroup: function (e, t) { e.selectedGroup = t.payload }, getGroupChat: function (e, t) { e.groupChat = t.payload }, saveCreatedGroup: function (e, t) { e.createdGroup = t.payload }, getJoinedGroups: function (e, t) { e.joinedGroups = t.payload }, saveSearchName: function (e, t) { e.searchText = t.payload }, setOpenDetailsSection: function (e) { e.openDetailsSection = !1 }, closeOpenDetailsSection: function (e) { e.openDetailsSection = !0 } }, extraReducers: function (e) { e.addCase(R.pending, (function (e, t) { e.usersDataLoading = !0 })).addCase(R.fulfilled, (function (e, t) { e.allUsers = t.payload, e.usersDataLoading = !1 })).addCase(L.pending, (function (e, t) { e.groupsDataLoading = !0 })).addCase(L.fulfilled, (function (e, t) { var n = t.payload; e.groupsDataLoading = !1, e.allGroups = n })).addCase(N.pending, (function (e, t) { e.messageDataLoading = !0 })).addCase(N.fulfilled, (function (e, t) { var n = t.payload; e.messageDataLoading = !1, e.messages = n })).addCase(A.pending, (function (e, t) { e.deleteTextLoading = !0 })).addCase(A.fulfilled, (function (e, t) { e.deleteTextLoading = !1 })).addCase(F.pending, (function (e, t) { e.allMessageDeleteLoading = !0 })).addCase(F.fulfilled, (function (e, t) { e.allMessageDeleteLoading = !1 })).addCase(_.pending, (function (e, t) { e.updateUserInfo = !0 })).addCase(_.fulfilled, (function (e, t) { e.updateUserInfo = !1 })).addCase(M.pending, (function (e, t) { e.updateUserInfo = !0 })).addCase(M.fulfilled, (function (e, t) { e.updateUserInfo = !1 })).addCase(G.pending, (function (e, t) { e.updateUserInfo = !0 })).addCase(G.fulfilled, (function (e, t) { e.updateUserInfo = !1 })).addCase(z.pending, (function (e, t) { e.updateUserInfo = !0 })).addCase(z.fulfilled, (function (e, t) { e.updateUserInfo = !1 })) } }), B = P.actions, T = B.currentLoginUser, V = B.myConvertations, Y = B.selectUser, W = B.addGroupMembers, K = B.removeFromSelectedPeople, q = B.selectGroup, H = B.getGroupChat, J = B.saveCreatedGroup, X = B.reseatGroupMembers, Q = B.getJoinedGroups, Z = B.saveSearchName, $ = B.setOpenDetailsSection, ee = B.closeOpenDetailsSection, te = P.reducer, ne = n(13), ae = n(614), re = n(2), oe = Object(ne.a)(ae.a)((function (e) { var t = e.theme; return { "& .MuiBadge-badge": { backgroundColor: "#44b700", color: "#44b700", boxShadow: "0 0 0 2px ".concat(t.palette.background.paper), "&::after": { position: "absolute", top: 0, left: 0, width: "100%", height: "100%", borderRadius: "50%", animation: "ripple 1.2s infinite ease-in-out", border: "1px solid currentColor", content: '""' } }, "@keyframes ripple": { "0%": { transform: "scale(.8)", opacity: 1 }, "100%": { transform: "scale(2.4)", opacity: 0 } } } })), ie = function (e) { var t = e.photoURL; return Object(re.jsx)(re.Fragment, { children: Object(re.jsx)(oe, { overlap: "circular", anchorOrigin: { vertical: "bottom", horizontal: "right" }, variant: "dot", children: Object(re.jsx)(y.a, { sx: { width: { xs: 30, md: 50 }, height: { xs: 30, md: 50 } }, alt: "Remy Sharp", src: t }) }) }) }; var ce = function (e) { var t = e.convertionalUser, n = (e.socket, e.uid), r = e.selectChatBox, o = k(), i = Object(a.useState)([]), c = Object(l.a)(i, 2), s = (c[0], c[1], w((function (e) { return e.data }))), d = (s.convertationUsers, s.allUsers, s.loginUser, Object(a.useState)({})), b = Object(l.a)(d, 2), p = b[0]; return b[1], Object(a.useEffect)((function () { }), []), Object(re.jsx)(re.Fragment, { children: Object(re.jsxs)(u.a, { onClick: function () { o(Y(t)), r() }, sx: { display: "flex", gap: 1, alignItems: "center", mb: 3, p: 1, borderRadius: n === t.uid ? 0 : 2, background: n === t.uid ? "none" : "#5C4F81", borderRight: n === t.uid ? "3px solid #5C4F81" : "" }, children: [(null === p || void 0 === p ? void 0 : p.email) === (null === t || void 0 === t ? void 0 : t.email) ? Object(re.jsx)(ie, { photoURL: null === p || void 0 === p ? void 0 : p.photoURL }) : Object(re.jsx)(y.a, { alt: "user photo", sx: { width: { xs: 30, md: 50 }, height: { xs: 30, md: 50 } }, src: t.photoURL }), Object(re.jsxs)(u.a, { sx: { display: { xs: "none", md: "block" } }, children: [Object(re.jsx)(j.a, { variant: "h6", sx: { fontSize: 16, color: "whitesmoke" }, children: t.displayName }), Object(re.jsxs)(j.a, { variant: "h6", sx: { fontSize: 11, color: "#9881d6" }, children: [n === t.uid && Object(re.jsx)(m.c, { className: "reply_icon" }), t.email] })] })] }) }) }, se = n(623), le = n(624); var de = function (e) { var t, n = e.socket, r = e.roomId, o = e.uid, i = e.addConverationRoute, c = e.handleDrawerOpen, s = e.selectChatBox, d = Object(a.useState)({}), b = Object(l.a)(d, 2), p = b[0], h = b[1]; null === n || void 0 === n || null === (t = n.current) || void 0 === t || t.on("addedUser", (function (e) { x(R()), h(e) })); var x = k(), f = w((function (e) { return e.data })), v = f.allUsers, m = f.convertationUsers, O = f.usersDataLoading, y = (f.selectedUser, f.searchText), C = f.loginUser, S = v.find((function (e) { return e.uid === C.uid })); Object(a.useEffect)((function () { var e, t, n = []; if (0 !== (null === S || void 0 === S || null === (e = S.contracts) || void 0 === e ? void 0 : e.length) && null != (null === S || void 0 === S || null === (t = S.contracts) || void 0 === t ? void 0 : t.length)) { for (var a = function (e) { var t = null === S || void 0 === S ? void 0 : S.contracts[e], a = v.find((function (e) { return e.uid === t })); n.push(a) }, r = 0; r < (null === S || void 0 === S || null === (o = S.contracts) || void 0 === o ? void 0 : o.length); r++) { var o; a(r) } x(V(n)) } }), [C, O, p]); var U = m.filter((function (e) { var t, n; return null === (t = e.displayName) || void 0 === t || null === (n = t.toLowerCase()) || void 0 === n ? void 0 : n.includes(null === y || void 0 === y ? void 0 : y.toLowerCase()) })); return Object(re.jsxs)(u.a, { sx: { p: 2, height: 550, overflowY: "scroll" }, children: [0 === (null === m || void 0 === m ? void 0 : m.length) && !O && Object(re.jsxs)(u.a, { sx: { width: "100%" }, children: [Object(re.jsx)(j.a, { variant: "h5", sx: { mb: 2, textAlign: "center", color: "whitesmoke", letterSpacing: 2, fontSize: { xs: "0.5rem", md: "1rem", lg: "1.5rem" } }, children: "Please add people on your contracts" }), Object(re.jsx)(se.a, { id: "addContactBtn", onClick: i, sx: { display: { xs: "none", lg: "block" } }, children: "Make friends" }), Object(re.jsx)(se.a, { onClick: c, id: "addContactBtn", sx: { display: { xs: "block", lg: "none" } }, children: "Add People" })] }), O && 0 === m.length && Object(re.jsx)(re.Fragment, { children: Object(g.a)(new Array(4)).map((function (e, t) { return Object(re.jsx)(le.a, { height: 90, animation: "wave" }, t) })) }), U.map((function (e, t) { return Object(re.jsx)(ce, { convertionalUser: e, uid: o, socket: n, selectChatBox: s, roomId: r }, C._id) }))] }) }, ue = n(14), je = n(629), be = n(606), pe = n(171), he = n(91), xe = n(65), fe = n(53), ve = { apiKey: "AIzaSyAD-ywhlFwrHHK0MYeuBUmzrBCceI7b5O4", authDomain: "leaves-9aabb.firebaseapp.com", projectId: "leaves-9aabb", storageBucket: "leaves-9aabb.appspot.com", messagingSenderId: "49061255396", appId: "1:49061255396:web:bd33ea846ff90ba31674f1" }, me = n(24), Oe = n(321), ge = n.n(Oe); Object(fe.e)(ve); var ye = function () { var e, t = Object(a.useState)({}), n = Object(l.a)(t, 2), r = n[0], o = n[1], i = Object(a.useState)(!0), c = Object(l.a)(i, 2), s = c[0], d = c[1], u = Object(a.useState)(""), j = Object(l.a)(u, 2), b = j[0], p = j[1], h = k(), x = Object(me.g)(), f = Object(a.useState)(!1), v = Object(l.a)(f, 2), m = v[0], O = v[1], g = (null === (e = r.metadata) || void 0 === e || e.createdAt, new xe.a), y = Object(xe.c)(), w = Object(me.f)(); Object(a.useEffect)((function () { d(!0), Object(xe.d)(y, (function (e) { if (e) { var t = { createdAt: e.metadata.createdAt }, n = { photoURL: e.photoURL, displayName: e.displayName, uid: e.uid, createdAt: t.createdAt, email: e.email }; h(T(n)), o(e) } else o({}), h(T({})); d(!1) })) }), [y]); var C = function (e, t) { fetch("https://enigmatic-garden-12643.herokuapp.com/users", { method: t, headers: { "content-type": "application/json" }, body: JSON.stringify(e) }).then() }; return { handleGoogleSign: function (e) { d(!0), Object(xe.g)(y, g).then((function (t) { var n, a = t.user, r = { createdAt: a.metadata.createdAt }, o = { photoURL: a.photoURL, displayName: a.displayName, uid: a.uid, createdAt: r.createdAt, email: a.email, phone: null, adress: null, contracts: [], groups: [], profession: null }; h(T({ userData: o })); var i = (null === (n = e.state) || void 0 === n ? void 0 : n.from.pathname) || "/"; x(i), d(!1), D.a.get("https://enigmatic-garden-12643.herokuapp.com/users/checkuser/".concat(null === a || void 0 === a ? void 0 : a.uid)).then((function (e) { !0 === e.data.newUser && C(o, "PUT") })) })).catch((function (e) { p(e.message) })).finally((function () { return d(!1) })) }, user: r, error: b, loading: s, logOut: function () { d(!0); var e = Object(xe.c)(); Object(xe.h)(e).then((function () { o({}), h(T({})) })).catch((function (e) { console.error(e) })).finally((function () { return d(!1) })) }, signUpWithEmail: function (e, t, n) { d(!0), O(!0), Object(xe.b)(y, t, n).then((function (t) { Object(xe.i)(y.currentUser, { displayName: e, photoURL: "https://w7.pngwing.com/pngs/831/88/png-transparent-user-profile-computer-icons-user-interface-mystique-miscellaneous-user-interface-design-smile-thumbnail.png" }).then((function (e) { var n, a = t.user, r = a.metadata.createdAt, o = { photoURL: a.photoURL, displayName: a.displayName, uid: a.uid, createdAt: r, email: a.email, phone: null, adress: null, contracts: [], groups: [], profession: null }; C(o, "POST"), h(T({ userData: o })), O(!1), x((null === (n = w.state) || void 0 === n ? void 0 : n.from.pathname) || "/") })).catch((function (e) { p(e.message) })).finally((function () { return d(!1) })) })).catch((function (e) { O(!1), p(e.message) })) }, logInWithEmail: function (e, t) { d(!0), O(!0), Object(xe.f)(y, e, t).then((function (e) { var t, n = e.user, a = n.metadata.createdAt, r = { photoURL: n.photoURL, displayName: n.displayName, uid: n.uid, createdAt: a, email: n.email, phone: null, adress: null, contracts: [], groups: [], profession: null }; h(T({ userData: r })), O(!1), x((null === (t = w.state) || void 0 === t ? void 0 : t.from.pathname) || "/") })).catch((function (e) { p(e.message), O(!1) })).finally((function () { return d(!1) })) }, processing: m, reseatPassword: function (e) { O(!0), Object(xe.e)(y, e).then((function () { O(!1), ge()("Email sent", "Please check your email", "success") })).catch((function (e) { var t = e.message; p(t), O(!1) })) }, updatePhotoAndName: function (e, t) { Object(xe.i)(y.currentUser, { displayName: e, photoURL: t }).then((function (e) { })).catch((function (e) { console.log(e.message) })) } } }, ke = n(115), we = n(4), Ce = n(322); function Se(e) { return Object(re.jsxs)(u.a, { sx: { position: "relative" }, children: [Object(re.jsx)(be.a, Object(ue.a)(Object(ue.a)({ variant: "determinate", sx: { color: function (e) { return e.palette.grey["light" === e.palette.mode ? 400 : 800] } }, size: 25, thickness: 4 }, e), {}, { value: 100 })), Object(re.jsx)(be.a, Object(ue.a)({ variant: "indeterminate", disableShrink: !0, sx: Object(we.a)({ color: function (e) { return "light" === e.palette.mode ? "#4E426D" : "#308fe8" }, animationDuration: "550ms", position: "absolute", left: 0 }, "& .".concat(Ce.a.circle), { strokeLinecap: "round" }), size: 25, thickness: 4 }, e))] }) } var Ue = n(323), Ie = n(616), De = { position: "absolute", top: "50%", left: "50%", transform: "translate(-50%, -50%)", width: 450, bgcolor: "background.paper", boxShadow: 24 }; function Ee(e) { var t = e.openModal, n = (e.handleOpenModal, e.handleCloseModal), a = e.image; return Object(re.jsx)(re.Fragment, { children: Object(re.jsx)(Ie.a, { keepMounted: !0, open: t, onClose: n, "aria-labelledby": "keep-mounted-modal-title", "aria-describedby": "keep-mounted-modal-description", children: Object(re.jsx)(u.a, { sx: De, children: Object(re.jsx)(y.a, { src: a, sx: { width: "100%", height: "100%", borderRadius: 0 }, alt: "sender image" }) }) }) }) } var Ne = n(167), Re = n(324), Le = (n(108), function (e) { var t = e.messageContent, n = e.user, o = (e.textLoading, e.socket), i = e.roomId, c = (e.deletedMessage, r.a.useState(!1)), s = Object(l.a)(c, 2), d = s[0], b = s[1], p = function () { return b(!0) }, h = k(), x = (w((function (e) { return e.data })).deleteTextLoading, Object(a.useState)({})), f = Object(l.a)(x, 2), v = (f[0], f[1]); return Object(re.jsxs)(re.Fragment, { children: [null !== t && void 0 !== t && t.deleted ? Object(re.jsx)(u.a, { sx: { display: "grid", justifyContent: t.userId === n.uid ? "flex-end" : "flex-start" }, children: Object(re.jsxs)(j.a, { className: "message_text", sx: { background: "#4E426D", p: 1.5, color: "#ddd6d6", borderRadius: 2, mb: 2 }, variant: "body2", children: [Object(re.jsx)(Re.a, {}), " This message was deleted"] }) }) : Object(re.jsxs)(u.a, { id: t.userId === n.uid ? "myMessage" : "yourMessage", sx: { mb: 2 }, children: [t.userId === n.uid && Object(re.jsx)(je.a, { onClick: function () { !function (e) { var n; h(A(null === t || void 0 === t ? void 0 : t._id)); var a = Object(ue.a)(Object(ue.a)({}, e), {}, { roomId: i }); null === o || void 0 === o || null === (n = o.current) || void 0 === n || n.emit("deleteMessage", a) }(t), v(t) }, className: "delete_button", children: Object(re.jsx)(Ne.a, { style: { fontSize: 16 } }) }), t.userId !== n.uid && Object(re.jsx)(y.a, { sx: { width: 25, height: 25, objectFit: "cover", mt: 3, mr: .5, background: "#fff" }, src: null === t || void 0 === t ? void 0 : t.image, alt: "senderImage" }), Object(re.jsxs)("span", { children: [t.picture && Object(re.jsx)(re.Fragment, { children: Object(re.jsx)(y.a, { onClick: p, sx: { width: { xs: 120, md: 200 }, height: { xs: 100, md: 150 }, borderRadius: 2, boxShadow: 3, mb: 1 }, src: null === t || void 0 === t ? void 0 : t.picture, alt: "sendpicture" }) }), "" !== t.message && Object(re.jsx)(j.a, { className: "message_text", sx: { background: "#4E426D", p: 1.5, color: "whitesmoke", lineHeight: 1.5, borderRadius: 2 }, variant: "body2", children: t.message }), Object(re.jsx)(j.a, { variant: "caption", sx: { fontSize: 10, color: "#e5dada" }, children: Object(Ue.format)(t.time) })] })] }, t._id), Object(re.jsx)(Ee, { image: t.picture, openModal: d, handleOpenModal: p, handleCloseModal: function () { return b(!1) } })] }) }), Ae = n(326), Fe = n.n(Ae), _e = n(178), Me = n.n(_e), Ge = n(327), ze = n.n(Ge), Pe = n(612), Be = n(619), Te = n(630), Ve = n(611), Ye = n(610), We = function (e) { var t = e.user, n = w((function (e) { return null === e || void 0 === e ? void 0 : e.data })), a = n.messages, r = n.messageDataLoading, o = (n.openDetailsSection, a.filter((function (e) { return null === e || void 0 === e ? void 0 : e.picture }))); return Object(re.jsx)(re.Fragment, { children: Object(re.jsxs)(Te.a, { elevation: 0, sx: { p: 3, borderRadius: 0, background: "#4E426D" }, children: [Object(re.jsx)(y.a, { src: null === t || void 0 === t ? void 0 : t.photoURL, alt: null === t || void 0 === t ? void 0 : t.email, sx: { width: 70, height: 70, m: "0 auto" } }), Object(re.jsx)(j.a, { variant: "h6", sx: { fontSize: 18, textAlign: "center", mt: 1, color: "#fff" }, children: null === t || void 0 === t ? void 0 : t.displayName }), (null === t || void 0 === t ? void 0 : t.profession) && Object(re.jsx)(j.a, { variant: "h6", sx: { fontSize: 14, textAlign: "center", mt: 1, color: "whitesmoke" }, children: t.profession }), (null === t || void 0 === t ? void 0 : t.adress) && Object(re.jsx)(j.a, { variant: "h6", sx: { fontSize: 13, textAlign: "center", mt: 1, color: "whitesmoke" }, children: t.adress }), Object(re.jsx)(j.a, { variant: "h6", sx: { fontSize: 16, mt: 3, borderBottom: "2px solid #5C4F81", pb: 1, mb: 2, color: "whitesmoke" }, children: "Contact Information" }), Object(re.jsxs)(Ye.a, { sx: { display: "flex", alignItems: "center", gap: 2, my: 1 }, children: [Object(re.jsx)(je.a, { sx: { fontSize: 18, color: "whitesmoke", background: "#5C4F81" }, children: Object(re.jsx)(Ne.b, {}) }), Object(re.jsx)(j.a, { variant: "h6", sx: { fontSize: 13, color: "whitesmoke" }, children: null === t || void 0 === t ? void 0 : t.email })] }), (null === t || void 0 === t ? void 0 : t.phone) && Object(re.jsxs)(Ye.a, { sx: { display: "flex", alignItems: "center", gap: 2, my: 2 }, children: [Object(re.jsx)(je.a, { sx: { fontSize: 18, color: "whitesmoke", background: "#5C4F81" }, children: Object(re.jsx)(O.b, {}) }), Object(re.jsx)(j.a, { variant: "h6", sx: { fontSize: 13, color: "whitesmoke" }, children: null === t || void 0 === t ? void 0 : t.phone })] }), Object(re.jsx)("p", { style: { borderBottom: "2px solid #5C4F81" } }), Object(re.jsxs)(j.a, { variant: "h6", sx: { fontSize: 14, letterSpacing: 1, color: "whitesmoke" }, children: ["Attachment (", o.length, ")"] }), r && Object(re.jsx)(Ye.a, { className: "attachment", children: Object(g.a)(new Array(3)).map((function (e, t) { return Object(re.jsx)(Ve.a, { spacing: 1, children: Object(re.jsx)(le.a, { variant: "rectangular", sx: { height: 60, width: 70, borderRadius: 2 } }) }, t) })) }), !r && Object(re.jsx)(Ye.a, { className: "attachment", children: a.map((function (e) { return "" !== e.picture && Object(re.jsx)(y.a, { src: null === e || void 0 === e ? void 0 : e.picture, sx: { height: 60, width: 70, borderRadius: 2, mb: 2, boxShadow: 1 } }, e._id) })) })] }) }) }, Ke = n(618), qe = n(631), He = n(632), Je = n(325), Xe = function (e) { var t = w((function (e) { return e.data })), n = t.selectedGroup, r = t.allUsers, o = t.groupChat, i = Object(a.useState)([]), c = Object(l.a)(i, 2), s = c[0], d = c[1], b = o.filter((function (e) { return e.picture })); Object(a.useEffect)((function () { for (var e = [], t = function (t) { var a = null === n || void 0 === n ? void 0 : n.groupMembers[t], o = r.find((function (e) { return e.uid === a })); e.push(o) }, a = 0; a < (null === n || void 0 === n || null === (o = n.groupMembers) || void 0 === o ? void 0 : o.length); a++) { var o; t(a) } d(e) }), [n]); var p = { mb: 2, pb: .5, display: "flex", gap: 4, p: 1, alignItems: "center", background: "#5C4F81", borderRadius: 2 }; return Object(re.jsxs)(Te.a, { elevation: 3, sx: { p: 3, borderRadius: 0, background: "#4E426D", boxShadow: 0 }, children: [Object(re.jsx)(y.a, { src: null === n || void 0 === n ? void 0 : n.coverPhoto, alt: "groupImage", sx: { width: 150, height: 100, borderRadius: 2, m: "0 auto", boxShadow: 1 } }), Object(re.jsx)(j.a, { variant: "h6", sx: { mt: 1, fontWeight: "bold", letterSpacing: 1, textAlign: "center", color: "#fff" }, children: null === n || void 0 === n ? void 0 : n.groupName }), Object(re.jsxs)(Ke.a, { sx: { mt: 2, background: "#4E426D" }, children: [Object(re.jsx)(qe.a, { expandIcon: Object(re.jsx)(Je.a, { style: { color: "whitesmoke" } }), "aria-controls": "panel1a-content", id: "panel1a-header", children: Object(re.jsx)(j.a, { sx: { color: "#fff" }, children: "Group Members" }) }), Object(re.jsx)(He.a, { children: null === s || void 0 === s ? void 0 : s.map((function (e) { return Object(re.jsxs)(u.a, { sx: p, children: [Object(re.jsx)(y.a, { src: null === e || void 0 === e ? void 0 : e.photoURL, alt: null === e || void 0 === e ? void 0 : e.displayName, sx: { border: "1px solid #4E426D" } }), Object(re.jsx)(j.a, { variant: "body2", sx: { fontSize: 17, color: "whitesmoke" }, children: null === e || void 0 === e ? void 0 : e.displayName })] }, e._id) })) })] }), Object(re.jsxs)(j.a, { variant: "h6", sx: { fontSize: 15, letterSpacing: 1, fontWeight: "bold", mt: 1.5, color: "whitesmoke" }, children: ["Attachment (", null === b || void 0 === b ? void 0 : b.length, ")"] }), Object(re.jsx)(u.a, { className: "attachment", children: o.map((function (e) { return "" !== e.picture && Object(re.jsx)(y.a, { src: null === e || void 0 === e ? void 0 : e.picture, sx: { height: 70, width: 80, borderRadius: 2, mb: 2, boxShadow: 1 } }, e._id) })) })] }) }, Qe = { xs: "100%", sm: "60%", md: 350 }, Ze = function (e) { var t = e.roomId, n = e.group, a = e.openSidebar, o = r.a.useState(null), i = Object(l.a)(o, 2), c = i[0], s = i[1], d = Boolean(c), u = w((function (e) { return null === e || void 0 === e ? void 0 : e.data })), j = u.openDetailsSection, b = u.selectedUser, p = r.a.useState(!1), x = Object(l.a)(p, 2), v = x[0], m = x[1], O = function () { m(!1) }, g = k(), y = { fontSize: 16, color: "#fff" }, C = { mr: 7, background: "#5C4F81" }; return Object(re.jsxs)(re.Fragment, { children: [!n && Object(re.jsx)(je.a, { sx: C, children: Object(re.jsx)(Fe.a, { id: "basic-button", "aria-controls": d ? "basic-menu" : void 0, "aria-haspopup": "true", "aria-expanded": d ? "true" : void 0, onClick: function (e) { s(e.currentTarget) }, sx: y }) }), Object(re.jsx)(je.a, { color: "inherit", "aria-label": "open drawer", edge: "end", onClick: function () { m(!0) }, sx: Object(ue.a)(Object(ue.a)({}, d && { display: "none" }), {}, { display: { lg: "none" }, color: "#fff", background: "#5C4F81" }), children: Object(re.jsx)(Me.a, { sx: y }) }), Object(re.jsxs)(h.a, { onClose: O, sx: { width: Qe, flexShrink: 0, "& .MuiDrawer-paper": { width: Qe, background: "#4E426D" }, display: { xs: "block", lg: "none" } }, variant: "persistent", anchor: "right", open: v, children: [Object(re.jsx)(f.a, { onClick: O, sx: { mt: 3, color: "#fff", ml: 1 } }), 11 !== a && Object(re.jsx)(We, { user: b }), 11 === a && Object(re.jsx)(Xe, {})] }), j ? Object(re.jsx)(je.a, { id: "expand_icon", onKeyPress: function (e) { "f" === e.key && g($()) }, onClick: function () { g($()), localStorage.setItem("openDrawer", "true") }, sx: C, children: Object(re.jsx)(Me.a, { sx: y }) }) : Object(re.jsx)(je.a, { id: "expand_icon", onKeyPress: function (e) { "f" === e.key && g(ee()) }, onClick: function () { g(ee()), localStorage.setItem("openDrawer", "false") }, sx: { mr: 7, background: "#5C4F81" }, children: Object(re.jsx)(Me.a, { sx: y }) }), Object(re.jsx)(Pe.a, { id: "basic-menu", anchorEl: c, open: d, onClose: function () { s(null) }, sx: { "& .MuiPaper-root": { backgroundColor: "#5C4F81", color: "#fff" } }, MenuListProps: { "aria-labelledby": "basic-button" }, children: Object(re.jsxs)(Be.a, { sx: { letterSpacing: 1, fontSize: 14 }, onClick: function () { g(F(t)) }, children: [Object(re.jsx)(ze.a, { sx: { fontSize: 16, mr: .5 } }), "DELETE ALL DATA"] }) })] }) }, $e = n(620); function et(e) { var t = e.typeingUser, n = e.roomId, a = w((function (e) { return e.data })).loginUser; return Object(re.jsx)(re.Fragment, { children: Object(re.jsx)(u.a, { children: (null === t || void 0 === t ? void 0 : t.name) && (null === t || void 0 === t ? void 0 : t.uid) !== a.uid && n === (null === t || void 0 === t ? void 0 : t.roomId) && Object(re.jsx)(u.a, { id: "typeing_user", children: Object(re.jsxs)($e.a, { id: "list_item", children: [Object(re.jsx)(y.a, { sx: { width: 18, height: 18 }, src: null === t || void 0 === t ? void 0 : t.photo, alt: null === t || void 0 === t ? void 0 : t.name }), Object(re.jsxs)(j.a, { sx: { color: "#fff" }, variant: "caption", children: [null === t || void 0 === t ? void 0 : t.name, " is typeing..."] })] }) }) }) }) } var tt = function (e) { var t = e.socket, n = e.roomId, r = ye().user, o = Object(ke.a)(), i = o.register, c = o.watch, s = o.setValue, d = w((function (e) { return e.data })), b = d.selectedUser, p = d.messageDataLoading, h = d.deleteTextLoading, x = d.allMessageDeleteLoading, f = d.loginUser, v = Object(a.useState)(""), O = Object(l.a)(v, 2), k = O[0], S = O[1], I = Object(a.useState)(!1), E = Object(l.a)(I, 2), N = E[0], R = E[1], L = Object(a.useState)(""), A = Object(l.a)(L, 2), F = A[0], _ = A[1], M = Object(a.useState)([]), G = Object(l.a)(M, 2), z = G[0], P = G[1], B = Object(a.useState)({}), T = Object(l.a)(B, 2), V = T[0], Y = T[1], W = Object(a.useState)(!1), K = Object(l.a)(W, 2), q = K[0], H = K[1], J = Object(a.useState)([]), X = Object(l.a)(J, 2), Q = X[0], Z = X[1], $ = Object(a.useState)(new Audio("../../utlis/message.mp3")); Object(l.a)($, 1)[0], Object(a.useEffect)((function () { var e = function () { var e = Object(C.a)(U.a.mark((function e() { return U.a.wrap((function (e) { for (; ;)switch (e.prev = e.next) { case 0: return e.prev = 0, e.next = 3, D.a.get("https://enigmatic-garden-12643.herokuapp.com/chat/".concat(n)).then((function (e) { P(e.data) })); case 3: e.next = 8; break; case 5: e.prev = 5, e.t0 = e.catch(0), console.error(e.t0); case 8: case 9: case "end": return e.stop() } }), e, null, [[0, 5]]) }))); return function () { return e.apply(this, arguments) } }(); e() }), [n, b, h, x]); var ee = function () { var e = Object(C.a)(U.a.mark((function e() { var a; return U.a.wrap((function (e) { for (; ;)switch (e.prev = e.next) { case 0: return H(!0), a = { roomId: parseInt(n), message: k, image: r.photoURL, userId: r.uid, picture: F, time: Date.now() }, e.prev = 2, e.next = 5, D.a.post("https://enigmatic-garden-12643.herokuapp.com/chat", a).then((function () { return H(!1) })); case 5: _(""), e.next = 11; break; case 8: e.prev = 8, e.t0 = e.catch(2), console.error(e.t0); case 11: return e.next = 13, t.current.emit("send_message", a); case 13: return e.next = 15, t.current.emit("chatSound"); case 15: P((function (e) { return [].concat(Object(g.a)(e), [a]) })), _(""), S(""); case 18: case "end": return e.stop() } }), e, null, [[2, 8]]) }))); return function () { return e.apply(this, arguments) } }(), te = function () { var e = Object(C.a)(U.a.mark((function e() { return U.a.wrap((function (e) { for (; ;)switch (e.prev = e.next) { case 0: "" !== F && "" === k && ee(), "" !== k && "" === F && ee(), "" !== k && "" !== F && ee(); case 6: case "end": return e.stop() } }), e) }))); return function () { return e.apply(this, arguments) } }(); Object(a.useEffect)((function () { var e = c("picFile"); if (null !== e && void 0 !== e && e.length) { var t = new FormData; t.set("key", "752d2bbd9a2e4d6a5910df9c191e1643"), t.append("image", e[0]), R(!0), D()({ method: "post", url: "https://api.imgbb.com/1/upload", data: t }).then((function (e) { _(e.data.data.url), s("picFile", e.data.data.url) })).finally((function () { return R(!1) })) } }), [c("picFile")]), Object(a.useEffect)((function () { var e; null === (e = t.current) || void 0 === e || e.on("recive_message", (function (e) { var n = [].concat(Object(g.a)(z), [e]); Y({}), Q.includes(e) || Z([e].concat(Object(g.a)(Q))), t.current.on("play", (function () { })), P(n) })) }), [z, k, b, null === t || void 0 === t ? void 0 : t.current]); var ne = { name: f.displayName, photo: f.photoURL, roomId: n, uid: f.uid }; return Object(a.useEffect)((function () { var e, n, a, r, o; (null === (e = document) || void 0 === e || null === (n = e.getElementById("message_field")) || void 0 === n || n.addEventListener("focusout", (function () { null === t || void 0 === t || t.current.emit("typing", {}) })), null === t || void 0 === t || null === (a = t.current) || void 0 === a || a.on("typing", (function (e) { Y(e) })), null === t || void 0 === t || null === (r = t.current) || void 0 === r || r.on("deleteMessage", (function (e) { var t = null === z || void 0 === z ? void 0 : z.filter((function (t) { return t._id !== e._id })); P(t) })), "" === k) && (null === t || void 0 === t || null === (o = t.current) || void 0 === o || o.emit("typing", {})) }), [t, z]), Object(re.jsxs)(re.Fragment, { children: [Object(re.jsxs)(u.a, { sx: { boxShadow: 0, width: "100%", background: "#4E426D", ml: { xs: 0, md: 4 }, mt: { xs: 0, md: 4 }, mb: 0, p: 1.3, display: { xs: "block", md: "flex" }, justifyContent: "space-between" }, children: [Object(re.jsxs)(u.a, { sx: { display: "flex", gap: 2 }, children: [Object(re.jsx)(y.a, { alt: "userimage", sx: { width: { xs: "none", md: "block" } }, src: b.photoURL }), Object(re.jsxs)("span", { children: [Object(re.jsx)(j.a, { sx: { fontSize: 15, color: "#fff" }, variant: "h6", children: b.displayName }), Object(re.jsx)("small", { style: { color: "#ddd6d6" }, children: "Online" })] })] }), Object(re.jsx)(u.a, { sx: { mt: .5 }, children: Object(re.jsx)(Ze, { roomId: n }) })] }), Object(re.jsxs)(u.a, { sx: { p: 4 }, children: [p && Object(re.jsx)(u.a, { sx: { display: "flex", justifyContent: "center", alignItems: "center", height: { xs: "30rem", md: "34rem", xl: 680 } }, children: Object(re.jsx)(Se, {}) }), Object(re.jsxs)(u.a, { className: "message_container", sx: { height: { xs: "30rem", md: "34rem", xl: 680 } }, children: [0 === (null === z || void 0 === z ? void 0 : z.length) && !p && Object(re.jsxs)(u.a, { className: "", sx: { mt: 5, height: { xl: 680, md: 350, lg: 450 } }, children: [Object(re.jsx)(y.a, { alt: "userimage", sx: { height: 80, width: 80, m: "0 auto" }, src: b.photoURL }), Object(re.jsx)(j.a, { sx: { textAlign: "center", color: "whitesmoke" }, variant: "h6", children: b.displayName })] }), !p && Object(re.jsx)(he.a, { children: z.map((function (e) { return Object(re.jsx)(Le, { messageContent: e, user: r, socket: t, roomId: n, textLoading: q }, e._id) })) })] })] }), Object(re.jsx)(et, { roomId: n, typeingUser: V }), !p && Object(re.jsxs)(u.a, { sx: { p: 4, mb: 4 }, id: "bottom_nav", children: ["" !== F && Object(re.jsx)(u.a, { sx: { position: "absolute", bottom: 140 }, children: Object(re.jsx)(y.a, { sx: { width: 150, height: 100, borderRadius: 2, boxShadow: 2 }, alt: "yourselectpicture", src: F }) }), Object(re.jsx)("textarea", { onKeyPress: function () { null === t || void 0 === t || t.current.emit("typing", ne) }, onChange: function (e) { return S(e.target.value) }, placeholder: "Enter a Message", value: k, id: "message_field", style: { width: "100%", height: 60, background: "#4E426D", borderRadius: 10, marginBottom: 5 } }), Object(re.jsxs)(u.a, { sx: { mt: 0, float: "right" }, children: [Object(re.jsxs)("label", { htmlFor: "icon-button-file", children: [Object(re.jsx)("input", Object(ue.a)(Object(ue.a)({ style: { display: "none" }, id: "icon-button-file", accept: "image/*" }, i("picFile")), {}, { type: "file" })), Object(re.jsx)(je.a, { sx: { background: "#4E426D", color: "#fff", fontSize: 18 }, "aria-label": "upload picture", component: "span", children: Object(re.jsx)(m.a, {}) })] }), N ? Object(re.jsx)(je.a, { sx: { background: "#4E426D", color: "#fff", ml: 3, "&:hover": { background: "#4E426D" } }, children: Object(re.jsx)(be.a, { size: 14, sx: { color: "#fff" } }) }) : Object(re.jsx)(je.a, { onClick: te, sx: { background: "#4E426D", color: "#fff", fontSize: 14, ml: 3, "&:hover": { background: "#4E426D" } }, children: Object(re.jsx)(pe.a, {}) })] })] })] }) }, nt = n(332), at = n(617), rt = function (e) { var t, n = e.socket, r = w((function (e) { return e.data })), o = r.allUsers, i = r.usersDataLoading, c = r.searchText, s = r.loginUser, d = Object(a.useState)(!1), b = Object(l.a)(d, 2), p = b[0], h = b[1], x = Object(a.useState)(!1), f = Object(l.a)(x, 2), v = (f[0], f[1]), m = Object(a.useState)(""), O = Object(l.a)(m, 2), C = O[0], S = O[1], U = k(), I = o.find((function (e) { return e.uid === (null === s || void 0 === s ? void 0 : s.uid) })), E = function (e) { var t; S(e.uid), t = e, h(!0), D.a.post("https://enigmatic-garden-12643.herokuapp.com/users/addcontract/".concat(null === s || void 0 === s ? void 0 : s.uid), { uid: t.uid }).then((function (e) { var t; null === n || void 0 === n || null === (t = n.current) || void 0 === t || t.emit("addedUser", { userId: null === s || void 0 === s ? void 0 : s.uid }), h(!1), v(!0), U(R()) })) }, N = o.filter((function (e) { return (null === e || void 0 === e ? void 0 : e.uid) !== (null === I || void 0 === I ? void 0 : I.uid) })), L = N.filter((function (e) { var t, n; return null === e || void 0 === e || null === (t = e.displayName) || void 0 === t || null === (n = t.toLowerCase()) || void 0 === n ? void 0 : n.includes(null === c || void 0 === c ? void 0 : c.toLowerCase()) })), A = { borderColor: "#fff", color: "#fff", "&:hover": { borderColor: "#fff" } }, F = { display: "flex", alignItems: "center", mb: 2, p: 1, borderRadius: 2, justifyContent: "space-between", borderBottom: "2px solid #5C4F81", mr: 2 }; return Object(re.jsxs)(re.Fragment, { children: [i && 0 === N.length && Object(re.jsx)(u.a, { children: Object(g.a)(new Array(5)).map((function (e, t) { return Object(re.jsx)(le.a, { sx: { height: 80 } }) })) }), L.map((function (e, n) { var a; return Object(re.jsxs)(u.a, { sx: F, children: [Object(re.jsx)("small", { style: { display: "none" }, children: t = null === I || void 0 === I || null === (a = I.contracts) || void 0 === a ? void 0 : a.find((function (t) { return t === (null === e || void 0 === e ? void 0 : e.uid) })) }), Object(re.jsx)("br", {}), Object(re.jsx)(y.a, { alt: "user photo", sx: { width: 45, height: 45 }, src: e.photoURL }), Object(re.jsxs)("span", { children: [Object(re.jsx)(j.a, { variant: "h6", sx: { fontSize: 16, color: "#fff" }, children: e.displayName }), Object(re.jsx)(j.a, { variant: "h6", sx: { fontSize: 11, color: "#9881d6" }, children: e.email })] }), p && C === (null === e || void 0 === e ? void 0 : e.uid) ? Object(re.jsx)(at.a, { loading: !0, variant: "outlined", children: "Submit" }) : Object(re.jsx)("span", { children: t !== (null === e || void 0 === e ? void 0 : e.uid) ? Object(re.jsx)(se.a, { sx: A, variant: "outlined", onClick: function () { return E(e) }, children: "ADD+" }) : Object(re.jsx)(se.a, { sx: A, disabled: !0, variant: "outlined", children: "ADDED" }) })] }, e._id) }))] }) }, ot = n(633), it = n(628), ct = { position: "absolute", top: "50%", left: "50%", transform: "translate(-50%, -50%)", width: 430, bgcolor: "#5C4F81", boxShadow: 24, p: 3, borderRadius: 2, zIndex: 90909090 }; function st(e) { e.handleOpen; var t = e.open, n = e.handleClose, r = (e.handleReloadGroup, Object(a.useState)(0)), o = Object(l.a)(r, 2), i = o[0], c = o[1], d = Object(a.useState)(new Set), p = Object(l.a)(d, 2), h = p[0], x = p[1], f = Object(a.useState)(""), v = Object(l.a)(f, 2), m = v[0], O = v[1], g = w((function (e) { return e.data })), S = g.allUsers, I = g.selectedGroupMembers, E = g.loginUser, N = k(), R = Object(a.useState)(!1), L = Object(l.a)(R, 2), A = L[0], F = L[1], _ = function () { var e = Object(C.a)(U.a.mark((function e() { var t, a, r, o, i, l, d, u, j; return U.a.wrap((function (e) { for (; ;)switch (e.prev = e.next) { case 0: if ("" !== m) { e.next = 2; break } return e.abrupt("return", alert("Please give the group name..")); case 2: F(!0), t = [E.uid], a = Object(s.a)(I); try { for (a.s(); !(r = a.n()).done;)o = r.value, t.push(o.uid) } catch (b) { a.e(b) } finally { a.f() } return i = Math.floor(20298323023e5 * Math.random()) + 1, N(J(l = { groupId: i, groupName: m, groupMembers: t, coverPhoto: "https://i.postimg.cc/t4SCnxv4/ethan-dow-d-Wa-Bk-AWCxs-A-unsplash-1.jpg" })), e.prev = 10, e.next = 13, D.a.post("https://enigmatic-garden-12643.herokuapp.com/group", l).then((function (e) { F(!1), N(X(0)), n(), c(0) })); case 13: d = Object(s.a)(I), e.prev = 14, d.s(); case 16: if ((u = d.n()).done) { e.next = 22; break } return j = u.value, e.next = 20, D.a.post("https://enigmatic-garden-12643.herokuapp.com/group/saveinuserdata/".concat(j.uid), { groupId: i }); case 20: e.next = 16; break; case 22: e.next = 27; break; case 24: e.prev = 24, e.t0 = e.catch(14), d.e(e.t0); case 27: return e.prev = 27, d.f(), e.finish(27); case 30: return e.next = 33, D.a.post("https://enigmatic-garden-12643.herokuapp.com/group/saveinuserdata/".concat(E.uid), { groupId: i }); case 33: e.next = 38; break; case 35: e.prev = 35, e.t1 = e.catch(10), console.error(e.t1); case 38: case "end": return e.stop() } }), e, null, [[10, 35], [14, 24, 27, 30]]) }))); return function () { return e.apply(this, arguments) } }(), M = { borderRadius: 2, p: .5, mr: 2, borderColor: "#fff", color: "#fff", "&:hover": { borderColor: "#fff" } }, G = { fontSize: 17, letterSpacing: 1, textAlign: "center", mb: 2, color: "#fff" }; return Object(re.jsx)(re.Fragment, { children: Object(re.jsx)(Ie.a, { "aria-labelledby": "transition-modal-title", "aria-describedby": "transition-modal-description", open: t, onClose: function () { n(), setTimeout((function () { N(X(0)), c(0) }), 1e3) }, closeAfterTransition: !0, BackdropComponent: it.a, BackdropProps: { timeout: 500 }, children: Object(re.jsx)(b.a, { in: t, children: Object(re.jsxs)(u.a, { sx: ct, children: [0 === i && Object(re.jsxs)(u.a, { children: [Object(re.jsx)(j.a, { variant: "h6", sx: G, children: "Create a group" }), Object(re.jsx)("input", { placeholder: "Search people", id: "search_field", type: "text" }), Object(re.jsx)(u.a, { sx: { height: 250, overflowY: "scroll" }, children: S.map((function (e, t) { var n; return (null === E || void 0 === E ? void 0 : E.uid) !== (null === e || void 0 === e ? void 0 : e.uid) && Object(re.jsxs)(u.a, { sx: { display: "flex", gap: 1, alignItems: "center", justifyContent: "space-between", mb: 3, background: "#4E426D", p: 1, borderRadius: 3 }, children: [Object(re.jsxs)(u.a, { sx: { display: "flex", gap: 1, alignItems: "center" }, children: [Object(re.jsx)(y.a, { src: e.photoURL, alt: e.displayName }), Object(re.jsx)(j.a, { sx: { fontSize: 16, color: "#fff" }, variant: "h6", children: e.displayName })] }), (null === (n = I[t]) || void 0 === n ? void 0 : n.uid) === (null === e || void 0 === e ? void 0 : e.uid) ? Object(re.jsx)(se.a, { sx: M, onClick: function () { return t = e.uid, void N(K(t)); var t }, variant: "outlined", children: "REMOVE" }) : Object(re.jsx)(se.a, { onClick: function () { return function (e) { N(W(e)) }(e) }, sx: M, variant: "outlined", children: "Add" })] }) })) })] }), 1 === i && Object(re.jsxs)(u.a, { children: [Object(re.jsx)(j.a, { variant: "h6", sx: G, children: "Create a group with" }), Object(re.jsx)(ot.a, { max: 4, sx: { display: "flex", justifyContent: "center", mb: 2 }, children: I.map((function (e) { return Object(re.jsx)(y.a, { alt: null === e || void 0 === e ? void 0 : e.displayName, src: null === e || void 0 === e ? void 0 : e.photoURL }) })) }), Object(re.jsx)("input", { style: { padding: 17, width: "90%", borderRadius: 5 }, placeholder: "Group Name", id: "search_field", type: "text", onChange: function (e) { return O(e.target.value) } })] }), I.length > 0 && 0 === i && Object(re.jsx)(se.a, { variant: "contained", sx: { width: "100%", borderRadius: 25, position: "relative", background: "#4E426D", "&:hover": { background: "#4E426D" } }, onClick: function () { var e, t = h; e = i, h.has(e) && (t = new Set(t.values())).delete(i), c((function (e) { return e + 1 })), x(t) }, children: "NEXT" }), 1 === i && Object(re.jsx)(re.Fragment, { children: A ? Object(re.jsx)(at.a, { sx: { width: "100%", borderRadius: 25, position: "relative" }, loading: !0, variant: "outlined", children: "Submit" }) : Object(re.jsx)(se.a, { variant: "contained", sx: { width: "100%", borderRadius: 25, position: "relative", background: "#4E426D", "&:hover": { background: "#4E426D" } }, onClick: _, children: "CREATE GROUP" }) })] }) }) }) }) } var lt = function (e) { var t, n, a = e.group, r = e.handleAddRoomId, o = e.socket, i = e.mygroups, c = [], l = a.groupName, d = (a.groupId, a.coverPhoto), b = w((function (e) { return e.data })), p = b.allUsers, h = (b.allGroups, b.selectedGroup), x = k(), f = Object(s.a)(null === a || void 0 === a ? void 0 : a.groupMembers); try { var v = function () { var e = n.value, t = p.find((function (t) { return t.uid === e })); c.push(t) }; for (f.s(); !(n = f.n()).done;)v() } catch (O) { f.e(O) } finally { f.f() } 0 === (null === Object || void 0 === Object || null === (t = Object.keys(h)) || void 0 === t ? void 0 : t.length) && x(q(i[0])); var m = 0; return Object(re.jsx)(re.Fragment, { children: l && Object(re.jsxs)(u.a, { sx: { display: "flex", gap: 1.5, mb: 2, p: 1, background: a.groupId === (null === h || void 0 === h ? void 0 : h.groupId) ? "#5C4F81" : "", borderBottom: "2px solid #5C4F81" }, onClick: function () { x(q(a)); for (var e = 0; e < c.length; e++) { var t = c[e], n = null === t || void 0 === t ? void 0 : t.createdAt; m += parseFloat(n) } r(m), o.current.emit("join_room", m) }, children: [Object(re.jsx)(y.a, { src: d, alt: l, sx: { borderRadius: 1, width: 50, height: 50, my: .3 } }), Object(re.jsxs)(u.a, { children: [Object(re.jsx)(j.a, { variant: "h6", sx: { fontSize: 17, letterSpacing: 1, color: "whitesmoke" }, children: l }), Object(re.jsx)(ot.a, { className: "avatar_container", max: 5, sx: { display: "flex", justifyContent: "flex-end" }, children: c.map((function (e) { return Object(re.jsx)(y.a, { sx: { width: 17, height: 17 }, alt: null === e || void 0 === e ? void 0 : e.displayName, src: null === e || void 0 === e ? void 0 : e.photoURL }, e._id) })) })] })] }) }) }, dt = (n(563), function (e) { var t = e.socket, n = e.handleAddRoomId, o = r.a.useState(!1), i = Object(l.a)(o, 2), c = i[0], d = i[1], b = Object(a.useState)([]), p = Object(l.a)(b, 2), h = p[0], x = p[1], f = k(), v = w((function (e) { return null === e || void 0 === e ? void 0 : e.data })), m = v.loginUser, O = v.allUsers, y = v.allGroups, C = v.createdGroup, S = v.groupsDataLoading, U = null === O || void 0 === O ? void 0 : O.find((function (e) { return (null === e || void 0 === e ? void 0 : e.uid) === (null === m || void 0 === m ? void 0 : m.uid) })), I = []; Object(a.useEffect)((function () { }), []); var D = function () { d(!0) }; Object(a.useEffect)((function () { if (null !== U && void 0 !== U && U.groups) { var e, t = Object(s.a)(null === U || void 0 === U ? void 0 : U.groups); try { var n = function () { var t = e.value, n = null === y || void 0 === y ? void 0 : y.find((function (e) { return e.groupId === t })); I.push(n) }; for (t.s(); !(e = t.n()).done;)n() } catch (a) { t.e(a) } finally { t.f() } null !== C && void 0 !== C && C.groupName && I.push(C), x(I), f(Q(I)) } }), [C, y]); return Object(re.jsxs)(re.Fragment, { children: [0 !== (null === h || void 0 === h ? void 0 : h.length) && !S && Object(re.jsx)(u.a, { sx: { height: 550, overflowY: "scroll" }, children: h.map((function (e) { return Object(re.jsx)(lt, { group: e, mygroups: h, socket: t, handleAddRoomId: n }, null === e || void 0 === e ? void 0 : e._id) })) }), S && Object(re.jsx)(u.a, { children: Object(g.a)(new Array(5)).map((function (e, t) { return Object(re.jsx)(le.a, { sx: { height: 90 } }, t) })) }), !S && 0 === h.length && Object(re.jsx)(j.a, { sx: { mb: 2, textAlign: "center", color: "whitesmoke", letterSpacing: 2, fontSize: "1.5rem" }, variant: "h5", children: "You've not joined any group yet." }), Object(re.jsx)("span", { style: { display: "flex", justifyContent: "center" }, children: Object(re.jsx)("button", { type: "button", onClick: D, className: "creatGroupBtn", children: "CREATE GROUP" }) }), Object(re.jsx)(st, { handleOpen: D, open: c, handleReloadGroup: function (e) { f(L()) }, handleClose: function () { return d(!1) } })] }) }), ut = function (e) { var t = e.groupId, n = e.socket, r = e.openSidebar, o = w((function (e) { return e.data })), i = o.loginUser, c = o.selectedGroup, s = (o.deleteTextLoading, o.allMessageDeleteLoading), d = Object(a.useState)(""), b = Object(l.a)(d, 2), p = b[0], h = b[1], x = Object(a.useState)(""), f = Object(l.a)(x, 2), v = f[0], O = f[1], S = Object(a.useState)(!1), I = Object(l.a)(S, 2), E = I[0], N = I[1], R = Object(ke.a)(), L = R.register, A = R.watch, F = R.setValue, _ = Object(a.useState)([]), M = Object(l.a)(_, 2), G = M[0], z = M[1], P = Object(a.useState)(!0), B = Object(l.a)(P, 2), T = B[0], V = B[1], Y = Object(a.useState)([]), W = Object(l.a)(Y, 2), K = W[0], q = W[1], J = k(); Object(a.useEffect)((function () { V(!0), D.a.get("https://enigmatic-garden-12643.herokuapp.com/group/groupchat/".concat(c.groupId)).then((function (e) { V(!1), J(H(e.data)), z(e.data) })) }), [t, c, s]); var X = function () { var e = Object(C.a)(U.a.mark((function e() { var a; return U.a.wrap((function (e) { for (; ;)switch (e.prev = e.next) { case 0: return a = { message: p, image: i.photoURL, userId: i.uid, picture: v, time: Date.now(), roomId: t, groupId: c.groupId }, e.prev = 1, e.next = 4, D.a.post("https://enigmatic-garden-12643.herokuapp.com/chat", a); case 4: O(""), e.next = 10; break; case 7: e.prev = 7, e.t0 = e.catch(1), console.error(e.t0); case 10: return e.next = 12, n.current.emit("send_message", a); case 12: z((function (e) { return [].concat(Object(g.a)(e), [a]) })), O(""), h(""); case 15: case "end": return e.stop() } }), e, null, [[1, 7]]) }))); return function () { return e.apply(this, arguments) } }(), Q = function () { var e = Object(C.a)(U.a.mark((function e() { return U.a.wrap((function (e) { for (; ;)switch (e.prev = e.next) { case 0: "" !== v && "" === p && X(), "" !== p && "" === v && X(), "" !== p && "" !== v && X(); case 6: case "end": return e.stop() } }), e) }))); return function () { return e.apply(this, arguments) } }(); Object(a.useEffect)((function () { var e = A("picFile"); if (null !== e && void 0 !== e && e.length) { var t = new FormData; t.set("key", "752d2bbd9a2e4d6a5910df9c191e1643"), t.append("image", e[0]), N(!0), D()({ method: "post", url: "https://api.imgbb.com/1/upload", data: t }).then((function (e) { O(e.data.data.url), F("pic", e.data.data.url) })).finally((function () { return N(!1) })) } }), [A("picFile")]), Object(a.useEffect)((function () { var e; null === (e = n.current) || void 0 === e || e.on("recive_message", (function (e) { var t = [].concat(Object(g.a)(G), [e]); q([]), z(t) })) }), [n, G]); var Z = { name: i.displayName, photo: i.photoURL, roomId: t, uid: i.uid }, $ = function () { var e = Object(C.a)(U.a.mark((function e() { return U.a.wrap((function (e) { for (; ;)switch (e.prev = e.next) { case 0: return e.prev = 0, e.next = 3, null === n || void 0 === n ? void 0 : n.current.emit("typing", Z); case 3: e.next = 8; break; case 5: e.prev = 5, e.t0 = e.catch(0), console.log(e.t0.message); case 8: case "end": return e.stop() } }), e, null, [[0, 5]]) }))); return function () { return e.apply(this, arguments) } }(); return Object(a.useEffect)((function () { var e, t, a, r, o; (null === (e = document) || void 0 === e || null === (t = e.getElementById("message_field")) || void 0 === t || t.addEventListener("focusout", (function () { null === n || void 0 === n || n.current.emit("typing", {}) })), null === n || void 0 === n || null === (a = n.current) || void 0 === a || a.on("typing", (function (e) { q([].concat(Object(g.a)(K), [e])) })), null === n || void 0 === n || null === (r = n.current) || void 0 === r || r.on("deleteMessage", (function (e) { var t = null === G || void 0 === G ? void 0 : G.filter((function (t) { return t._id !== e._id })); z(t) })), "" === p) && (null === n || void 0 === n || null === (o = n.current) || void 0 === o || o.emit("typing", {})) }), [n, G]), Object(re.jsxs)(re.Fragment, { children: [Object(re.jsxs)(u.a, { sx: { boxShadow: 0, width: "100%", background: "#4E426D", ml: { xs: 0, md: 4 }, mt: { xs: 0, md: 4 }, mb: 0, p: 1.3, display: { xs: "block", md: "flex" }, justifyContent: "space-between" }, children: [Object(re.jsxs)(u.a, { sx: { display: "flex", gap: 2 }, children: [Object(re.jsx)(y.a, { alt: "userimage", src: c.coverPhoto }), Object(re.jsxs)("span", { children: [Object(re.jsx)(j.a, { sx: { fontSize: 15, color: "#fff" }, variant: "h6", children: c.groupName }), Object(re.jsx)("small", { style: { color: "#ddd6d6" }, children: "Online" })] })] }), Object(re.jsx)(u.a, { sx: { mt: .5 }, children: Object(re.jsx)(Ze, { openSidebar: r, group: !0 }) })] }), Object(re.jsxs)(u.a, { sx: { p: 4 }, children: [T && Object(re.jsx)(u.a, { sx: { display: "flex", justifyContent: "center", alignItems: "center", height: "485px" }, children: Object(re.jsx)(Se, {}) }), Object(re.jsxs)(u.a, { className: "message_container", sx: { height: { xs: "30rem", md: "34rem", xl: 680 } }, children: [0 === (null === G || void 0 === G ? void 0 : G.length) && !T && Object(re.jsxs)(u.a, { sx: { mt: 5 }, children: [Object(re.jsx)(y.a, { alt: "userimage", sx: { height: 80, width: 80, m: "0 auto" }, src: c.coverPhoto }), Object(re.jsx)(j.a, { sx: { textAlign: "center", color: "whitesmoke" }, variant: "h6", children: c.groupName })] }), !T && Object(re.jsx)(he.a, { children: G.map((function (e) { return Object(re.jsx)(Le, { messageContent: e, user: i }, e._id) })) })] })] }), Object(re.jsx)(u.a, { children: null === K || void 0 === K ? void 0 : K.map((function (e) { return Object(re.jsx)(u.a, { children: (null === e || void 0 === e ? void 0 : e.name) && t === (null === e || void 0 === e ? void 0 : e.roomId) && Object(re.jsx)(u.a, { id: "typeing_user", children: Object(re.jsxs)($e.a, { id: "list_item", children: [Object(re.jsx)(y.a, { sx: { width: 18, height: 18 }, src: null === e || void 0 === e ? void 0 : e.photo, alt: null === e || void 0 === e ? void 0 : e.name }), Object(re.jsxs)(j.a, { sx: { color: "#fff" }, variant: "caption", children: [null === e || void 0 === e ? void 0 : e.name, " is typeing..."] })] }) }) }) })) }), !T && Object(re.jsxs)(u.a, { sx: { p: 4, mb: 3.5 }, id: "bottom_nav", children: ["" !== v && Object(re.jsx)(u.a, { sx: { position: "absolute", bottom: 140 }, children: Object(re.jsx)(y.a, { sx: { width: 150, height: 100, borderRadius: 2, boxShadow: 2 }, alt: "yourselectpicture", src: v }) }), Object(re.jsx)("textarea", { onKeyPress: $, onChange: function (e) { return h(e.target.value) }, placeholder: "Enter a Message", value: p, id: "message_field", style: { width: "100%", height: 60, background: "#4E426D", borderRadius: 10, marginBottom: 5 } }), Object(re.jsxs)(u.a, { sx: { mt: 0, float: "right" }, children: [Object(re.jsxs)("label", { htmlFor: "icon-button-file", children: [Object(re.jsx)("input", Object(ue.a)(Object(ue.a)({ style: { display: "none" }, id: "icon-button-file", accept: "image/*" }, L("picFile")), {}, { type: "file" })), Object(re.jsx)(je.a, { sx: { background: "#4E426D", color: "#fff", fontSize: 18 }, "aria-label": "upload picture", component: "span", children: Object(re.jsx)(m.a, {}) })] }), E ? Object(re.jsx)(je.a, { sx: { background: "#4E426D", color: "#fff", ml: 3, "&:hover": { background: "#4E426D" } }, children: Object(re.jsx)(be.a, { size: 14, sx: { color: "#fff" } }) }) : Object(re.jsx)(je.a, { onClick: Q, sx: { background: "#4E426D", color: "#fff", fontSize: 14, ml: 3, "&:hover": { background: "#4E426D" } }, children: Object(re.jsx)(pe.a, {}) })] })] })] }) }, jt = n(329), bt = n.n(jt), pt = function () { var e = w((function (e) { return e.data })).loginUser, t = ye().logOut, n = r.a.useState(null), a = Object(l.a)(n, 2), o = a[0], i = a[1], c = Boolean(o), s = { display: "flex", justifyContent: "center" }; return Object(re.jsxs)(re.Fragment, { children: [Object(re.jsxs)(u.a, { children: [Object(re.jsx)(je.a, { id: "basic-button", sx: { float: "right", background: "#5C4F81", color: "white", m: 1 }, "aria-controls": c ? "basic-menu" : void 0, "aria-haspopup": "true", "aria-expanded": c ? "true" : void 0, onClick: function (e) { i(e.currentTarget) }, children: Object(re.jsx)(p.b, {}) }), Object(re.jsx)(u.a, { children: !window.navigator.onLine && Object(re.jsxs)(u.a, { sx: { display: "flex", alignItems: "center", boxShadow: 2, width: 120, borderRadius: 5, pl: 1, color: "white", background: "red" }, children: [Object(re.jsx)(bt.a, { sx: { fontSize: 16 } }), Object(re.jsx)(j.a, { variant: "caption", children: "You're offline" })] }) })] }), Object(re.jsxs)(Pe.a, { sx: { "& .MuiPaper-root": { backgroundColor: "#5C4F81", color: "#fff" } }, id: "basic-menu", anchorEl: o, open: c, onClose: function () { i(null) }, MenuListProps: { "aria-labelledby": "basic-button" }, children: [Object(re.jsx)(Be.a, { sx: { display: "flex", justifyContent: "center" }, children: Object(re.jsx)(y.a, { src: null === e || void 0 === e ? void 0 : e.photoURL, alt: "" }) }), Object(re.jsx)(Be.a, { sx: s, children: null === e || void 0 === e ? void 0 : e.displayName }), Object(re.jsx)(Be.a, { sx: s, children: null === e || void 0 === e ? void 0 : e.email }), Object(re.jsx)(Be.a, { onClick: t, sx: s, style: { background: "#463a63" }, children: "Log out" })] })] }) }, ht = { xs: "80%", sm: "60%", md: 350 }; var xt = function () { var e = w((function (e) { return e.data })), t = e.convertationUsers, n = e.joinedGroups, r = e.selectedUser, o = e.loginUser, i = e.openDetailsSection, c = e.usersDataLoading, x = (localStorage.getItem("openDrawer"), k()), g = Object(a.useState)(1), y = Object(l.a)(g, 2), C = y[0], S = y[1], U = Object(a.useRef)(), I = Object(a.useState)(0), D = Object(l.a)(I, 2), E = D[0], R = D[1], L = Object(a.useState)(), A = Object(l.a)(L, 2), F = A[0], _ = A[1], M = Object(a.useState)(1), G = Object(l.a)(M, 2), z = G[0], P = G[1], B = Object(me.g)(), T = Object(a.useState)(!1), V = Object(l.a)(T, 2), W = V[0], K = V[1], q = function () { K(!0), P(10) }; if (Object(a.useEffect)((function () { U.current = nt.a.connect("https://enigmatic-garden-12643.herokuapp.com"), U.current.removeAllListeners() }), []), 0 === (null === Object || void 0 === Object ? void 0 : Object.keys(r).length)) { var H, J = Object(s.a)(t); try { for (J.s(); !(H = J.n()).done;) { var X = H.value; x(Y(X)) } } catch (ee) { J.e(ee) } finally { J.f() } } var Q = U; Object(a.useEffect)((function () { if (3 !== C) { var e = parseFloat(o.createdAt) + parseFloat(r.createdAt); !0 === isNaN(F) ? _(e) : (_(e), x(N(e)), e === F && Q.current.emit("join_room", F)) } }), [r, F]); var $ = function (e) { R(e) }; return Object(re.jsxs)(re.Fragment, { children: [Object(re.jsxs)(h.a, { sx: { width: ht, flexShrink: 0, "& .MuiDrawer-paper": { width: ht, background: "#4E426D" }, display: { xs: "block", lg: "none" } }, variant: "persistent", anchor: "left", open: W, children: [Object(re.jsx)(f.a, { onClick: function () { K(!1) }, sx: { mt: 3, color: "#fff", ml: 1 } }), 10 === z && Object(re.jsx)(rt, { socket: U }), 11 === z && Object(re.jsx)(dt, { socket: U, handleAddRoomId: $ })] }), Object(re.jsxs)(d.a, { container: !0, id: "home", children: [Object(re.jsxs)(d.a, { item: !0, xs: 3, md: 4, lg: 3, xl: 2.5, id: "sidebar", children: [Object(re.jsx)(pt, {}), Object(re.jsx)(u.a, { sx: { px: 2, pb: 1 }, children: Object(re.jsx)("input", { onChange: function (e) { return x(Z(e.target.value)) }, placeholder: "Search People for Messages", className: "search_input", type: "search" }) }), Object(re.jsxs)(u.a, { sx: { width: "100%", display: "flex", flexWrap: "wrap", justifyContent: "space-between ", mt: 1, mb: 4, background: "#5C4F81" }, children: [Object(re.jsx)("span", { onClick: function () { S(1), P(10) }, className: 1 === C ? "page_active" : "top_nav", children: Object(re.jsx)(p.a, {}) }), Object(re.jsx)("span", { id: "mobile_icon", onClick: q, className: "top_nav", children: Object(re.jsx)(v.b, {}) }), Object(re.jsx)("span", { id: "mobile_icon", onClick: function () { q(), P(11) }, className: "top_nav", children: Object(re.jsx)(m.b, {}) }), Object(re.jsx)("span", { id: "visible_icon", onClick: function () { return S(2) }, className: 2 === C ? "page_active" : "top_nav", children: Object(re.jsx)(v.b, {}) }), Object(re.jsx)("span", { id: "visible_icon", onClick: function () { return S(3) }, className: 3 === C ? "page_active" : "top_nav", children: Object(re.jsx)(m.b, {}) }), Object(re.jsx)("span", { className: "top_nav", children: Object(re.jsx)(O.a, { onClick: function () { return B("/setting/".concat(o.uid)) } }) })] }), 1 === C && Object(re.jsx)(de, { selectChatBox: function () { S(1), P(10) }, handleDrawerOpen: q, addConverationRoute: function () { S(2) }, socket: U, roomId: F, uid: null === r || void 0 === r ? void 0 : r.uid }), 2 === C && Object(re.jsx)(rt, { socket: U }), 3 === C && Object(re.jsx)(dt, { socket: U, handleAddRoomId: $ })] }), 0 === (null === t || void 0 === t ? void 0 : t.length) && 3 !== C && Object(re.jsx)(d.a, { item: !0, xs: 9, md: 8, lg: 9, xl: 9.5, sx: { backgroundColor: "#5C4F81", width: "100%", transition: "1s", height: "100vh" }, children: !c && Object(re.jsx)(j.a, { id: "emtyContactText", variant: "h5", children: "Your contact is emty to chat other people please add people in your contact. Happy chating !" }) }), 0 === (null === n || void 0 === n ? void 0 : n.length) && 3 === C && !c && Object(re.jsx)(d.a, { item: !0, xs: 9, md: 8, lg: 9, xl: 9.5, sx: { backgroundColor: "#5C4F81", width: "100%", transition: "1s", height: "100vh" }, children: !c && Object(re.jsx)(j.a, { id: "emtyContactText", variant: "h5", children: "You've not joined any group yet. Create a group or wait for anyone to join any group." }) }), 0 === (null === t || void 0 === t ? void 0 : t.length) && 0 !== n.length && !c && Object(re.jsx)(d.a, { item: !0, xs: 9, md: 8, lg: i ? 6 : 9, xl: i ? 7 : 9.5, sx: { backgroundColor: "#5C4F81", width: "100%", transition: "1s" }, children: 3 === C && Object(re.jsx)(ut, { groupId: E, socket: U, openSidebar: z }) }), (null === t || void 0 === t ? void 0 : t.length) > 0 && Object(re.jsxs)(d.a, { item: !0, xs: 9, md: 8, lg: i ? 6 : 9, xl: i ? 7 : 9.5, sx: { backgroundColor: "#5C4F81", width: "100%", transition: "1s" }, children: [3 !== C && 11 !== z && Object(re.jsx)(tt, { socket: U, selectedUser: r, roomId: F }), 3 === C && Object(re.jsx)(ut, { groupId: E, socket: U, openSidebar: z }), 11 === z && Object(re.jsx)(ut, { groupId: E, socket: U, openSidebar: z })] }), i && t.length > 0 && !c && Object(re.jsx)(b.a, { in: i, children: Object(re.jsxs)(d.a, { item: !0, md: 3, xs: 6, lg: 3, xl: 2.5, sx: { background: "#4E426D", display: { xs: "none", lg: "block" } }, children: [3 !== C && Object(re.jsx)(We, { user: r }), 3 === C && Object(re.jsx)(Xe, {})] }) }), 0 === (null === t || void 0 === t ? void 0 : t.length) && 0 !== n.length && !c && Object(re.jsx)(b.a, { in: i, children: Object(re.jsx)(d.a, { item: !0, md: 3, xs: 6, lg: 3, xl: 2.5, sx: { background: "#4E426D", display: { xs: "none", lg: "block" } }, children: 3 === C && Object(re.jsx)(Xe, {}) }) })] })] }) }, ft = n(330), vt = function () { var e = ye(), t = e.handleGoogleSign, n = e.signUpWithEmail, r = e.processing, o = e.logInWithEmail, i = Object(me.f)(), c = Object(a.useState)(!1), s = Object(l.a)(c, 2), d = s[0], b = s[1], p = Object(a.useRef)(null), h = Object(a.useRef)(null), x = Object(me.g)(), f = Object(a.useRef)(null); w((function (e) { return null === e || void 0 === e ? void 0 : e.data })).loginUser; return Object(re.jsx)(u.a, { sx: { width: "100%", height: "100vh", display: "flex", justifyContent: "center", alignItems: "center", backgroundImage: "linear-gradient(to right, #4E426D, #3b3153)" }, children: Object(re.jsxs)(Te.a, { elevation: 3, sx: { width: { xs: 300, md: 350 }, p: 3, background: "#5C4F81" }, className: "login_form", children: [Object(re.jsx)(u.a, { className: "logo_container", children: Object(re.jsx)("span", { className: "logo", children: Object(re.jsx)(v.a, { className: "icon" }) }) }), Object(re.jsx)(j.a, { variant: "h6", children: d ? "Sign Up" : "LOGIN" }), Object(re.jsxs)("form", { onSubmit: function (e) { var t, a, r; if (d) n(null === p || void 0 === p || null === (t = p.current) || void 0 === t ? void 0 : t.value, null === h || void 0 === h || null === (a = h.current) || void 0 === a ? void 0 : a.value, null === f || void 0 === f || null === (r = f.current) || void 0 === r ? void 0 : r.value); else if (!d) { var i, c; o(null === h || void 0 === h || null === (i = h.current) || void 0 === i ? void 0 : i.value, null === f || void 0 === f || null === (c = f.current) || void 0 === c ? void 0 : c.value) } e.preventDefault() }, children: [d && Object(re.jsx)("input", { ref: p, required: !0, placeholder: "Name", type: "text" }), Object(re.jsx)("input", { ref: h, required: !0, placeholder: "Email", type: "email" }), Object(re.jsx)("input", { ref: f, required: !0, placeholder: "Password", type: "password" }), !d && Object(re.jsx)("span", { onClick: function () { return x("/reseatpass") }, className: "login_link", children: "Forget password ?" }), r ? Object(re.jsx)("button", { id: "login_button", type: "submit", children: "Loading..." }) : Object(re.jsx)("button", { id: "login_button", type: "submit", children: d ? "REGISTER" : "LOGIN" })] }), !d && Object(re.jsx)("span", { className: "login_link", onClick: function () { return b(!0) }, children: "Create an account ?" }), d && Object(re.jsx)("span", { className: "login_link", onClick: function () { return b(!1) }, children: "Have an account ? Login " }), Object(re.jsx)("span", { style: { display: "flex", justifyContent: "center" }, children: Object(re.jsx)(se.a, { onClick: function () { t(i) }, variant: "outlined", sx: { borderColor: "#453A61", p: 1, py: 1.5, fontSize: 17, "&:hover": { borderColor: "#453A61" }, margin: "0 auto" }, children: Object(re.jsx)(ft.a, {}) }) })] }) }) }, mt = function (e) { var t = e.children, n = ye(), a = (n.user, n.loading), r = w((function (e) { return e.data })).loginUser, o = Object(me.f)(); return a ? Object(re.jsx)(le.a, { animation: "wave", variant: "rectangular", sx: { width: "100vw", height: "100vh" } }) : r.uid ? Object(re.jsx)(re.Fragment, { children: t }) : Object(re.jsx)(me.a, { to: "/login", state: { from: o } }) }, Ot = n(99), gt = n(634), yt = n(613), kt = n(635), wt = n(331), Ct = function (e) { var t = e.user, n = ye().updatePhotoAndName, r = Object(a.useRef)(null), o = Object(a.useRef)(null), i = Object(a.useRef)(null), c = Object(a.useRef)(null), s = w((function (e) { return e.data })), l = s.loginUser, d = (s.updateUserInfo, k()), u = { borderColor: "#beb8b8", color: "whitesmoke", "&:hover": { borderColor: "#beb8b8" } }; return Object(re.jsxs)(re.Fragment, { children: [Object(re.jsxs)("span", { style: { display: "flex", marginBottom: 30 }, children: [Object(re.jsx)("input", { className: "setting_input", type: "text", ref: r, defaultValue: null === t || void 0 === t ? void 0 : t.displayName }), Object(re.jsx)(se.a, { onClick: function () { var e = r.current.value; if (e !== l.displayName) { var a = { uid: t.uid, name: e }; d(_(a)), n(e, l.photoURL) } }, variant: "outlined", sx: u, children: "SAVE" })] }), Object(re.jsxs)("span", { style: { display: "flex", marginBottom: 30 }, children: [Object(re.jsx)("input", { placeholder: "Phone number", className: "setting_input", type: "number", ref: o, defaultValue: null === t || void 0 === t ? void 0 : t.phone }), Object(re.jsx)(se.a, { onClick: function () { var e = { uid: t.uid, phone: o.current.value }; d(M(e)) }, variant: "outlined", sx: u, children: "SAVE" })] }), Object(re.jsxs)("span", { style: { display: "flex", marginBottom: 30 }, children: [Object(re.jsx)("input", { ref: c, placeholder: "Your profession", className: "setting_input", type: "text", defaultValue: null === t || void 0 === t ? void 0 : t.profession }), Object(re.jsx)(se.a, { onClick: function () { var e = { uid: t.uid, profession: c.current.value }; d(z(e)) }, variant: "outlined", sx: u, children: "SAVE" })] }), Object(re.jsxs)("span", { style: { display: "flex", marginBottom: 30 }, children: [Object(re.jsx)("input", { placeholder: "Your address", ref: i, className: "setting_input", type: "text", defaultValue: null === t || void 0 === t ? void 0 : t.adress }), Object(re.jsx)(se.a, { onClick: function () { var e = { uid: t.uid, adress: i.current.value }; d(G(e)) }, variant: "outlined", sx: u, children: "SAVE" })] }), Object(re.jsxs)("span", { style: { display: "flex", marginBottom: 0 }, children: [Object(re.jsx)("input", { className: "setting_input", type: "text", disabled: !0, defaultValue: null === t || void 0 === t ? void 0 : t.email }), Object(re.jsx)(se.a, { variant: "outlined", disabled: !0, children: Object(re.jsx)(wt.a, {}) })] })] }) }, St = function () { var e = w((function (e) { return null === e || void 0 === e ? void 0 : e.data })), t = e.loginUser, n = e.allUsers, a = (e.allGroups, e.groupsDataLoading, e.joinedGroups), r = (null === n || void 0 === n || n.find((function (e) { return (null === e || void 0 === e ? void 0 : e.uid) === (null === t || void 0 === t ? void 0 : t.uid) })), k(), { color: "whitesmoke", borderColor: "whitesmoke", "&:hover": { borderColor: "#5C4F81" } }); return Object(re.jsx)(u.a, { sx: { height: 370, overflowY: "scroll" }, children: Object(re.jsx)(he.a, { children: null === a || void 0 === a ? void 0 : a.map((function (e) { return Object(re.jsxs)(u.a, { sx: { display: "flex", alignItems: "center", justifyContent: "space-between", mb: 2, background: "#4E426D", p: 1, borderRadius: 1 }, children: [Object(re.jsx)(y.a, { src: null === e || void 0 === e ? void 0 : e.coverPhoto, alt: null === e || void 0 === e ? void 0 : e.groupName, sx: { borderRadius: 1 } }), Object(re.jsx)(j.a, { variant: "body1", children: null === e || void 0 === e ? void 0 : e.groupName }), Object(re.jsx)(se.a, { variant: "outlined", sx: r, children: "LEAVE" })] }, e._id) })) }) }) }, Ut = function () { var e = w((function (e) { return e.data })).convertationUsers, t = { color: "whitesmoke", borderColor: "whitesmoke", "&:hover": { borderColor: "#5C4F81" } }; return Object(re.jsx)(u.a, { sx: { height: 370, overflowY: "scroll" }, children: Object(re.jsx)(he.a, { children: e.map((function (e) { return Object(re.jsxs)(u.a, { sx: { display: "flex", alignItems: "center", justifyContent: "space-between", mb: 2, background: "#4E426D", p: 1, borderRadius: 4 }, children: [Object(re.jsx)(y.a, { src: null === e || void 0 === e ? void 0 : e.photoURL, alt: null === e || void 0 === e ? void 0 : e.displayName }), Object(re.jsx)(j.a, { variant: "body1", children: null === e || void 0 === e ? void 0 : e.displayName }), Object(re.jsx)(se.a, { variant: "outlined", sx: t, children: "REMOVE FROM CONTACT" })] }, e._id) })) }) }) }, It = n(235), Dt = n.n(It), Et = (n(564), ["children", "value", "index"]), Nt = { position: "absolute", top: "15%", left: "50%", transform: "translate(-50%, -50%)", width: 400, bgcolor: "#5C4F81", boxShadow: 24, p: 3 }; function Rt(e) { var t = e.children, n = e.value, a = e.index, r = Object(Ot.a)(e, Et); return Object(re.jsx)("div", Object(ue.a)(Object(ue.a)({ role: "tabpanel", hidden: n !== a, id: "vertical-tabpanel-".concat(a), "aria-labelledby": "vertical-tab-".concat(a) }, r), {}, { children: n === a && Object(re.jsx)(u.a, { sx: { p: 3 }, children: Object(re.jsx)(j.a, { children: t }) }) })) } function Lt() { var e = Object(a.useState)({}), t = Object(l.a)(e, 2), n = t[0], o = t[1], i = r.a.useState(0), c = Object(l.a)(i, 2), b = c[0], p = c[1], h = [], x = Object(me.h)().userId, f = Object(ke.a)(), v = f.register, m = f.watch, O = Object(a.useState)(!0), g = Object(l.a)(O, 2), S = g[0], I = g[1], E = ye(), N = E.user, R = E.updatePhotoAndName, A = Object(a.useState)(!1), F = Object(l.a)(A, 2), _ = F[0], M = F[1], G = Object(a.useState)(""), z = Object(l.a)(G, 2), P = z[0], B = z[1], Y = w((function (e) { return null === e || void 0 === e ? void 0 : e.data })), W = Y.loginUser, K = Y.allUsers, q = Y.allGroups, H = (Y.groupsDataLoading, Y.updateUserInfo), J = null === K || void 0 === K ? void 0 : K.find((function (e) { return (null === e || void 0 === e ? void 0 : e.uid) === (null === W || void 0 === W ? void 0 : W.uid) })), X = k(), Z = Object(a.useState)(!1), $ = Object(l.a)(Z, 2), ee = $[0], te = $[1], ne = r.a.useState(!1), ae = Object(l.a)(ne, 2), oe = ae[0], ie = ae[1]; function ce(e) { return { id: "vertical-tab-".concat(e), "aria-controls": "vertical-tabpanel-".concat(e) } } Object(a.useEffect)((function () { var e, t, n = []; if (0 !== (null === J || void 0 === J || null === (e = J.contracts) || void 0 === e ? void 0 : e.length) && null != (null === J || void 0 === J || null === (t = J.contracts) || void 0 === t ? void 0 : t.length)) { for (var a = function (e) { var t = null === J || void 0 === J ? void 0 : J.contracts[e], a = K.find((function (e) { return e.uid === t })); n.push(a) }, r = 0; r < (null === J || void 0 === J || null === (o = J.contracts) || void 0 === o ? void 0 : o.length); r++) { var o; a(r) } X(V(n)) } }), [W]), Object(a.useEffect)((function () { var e, t = { createdAt: null === N || void 0 === N || null === (e = N.metadata) || void 0 === e ? void 0 : e.createdAt }, n = { photoURL: N.photoURL, displayName: N.displayName, uid: N.uid, createdAt: null === t || void 0 === t ? void 0 : t.createdAt, email: N.email, phone: null, adress: null, contracts: [], groups: [], profession: null }; if (X(T(n)), X(L()), null !== J && void 0 !== J && J.groups) { var a, r = Object(s.a)(null === J || void 0 === J ? void 0 : J.groups); try { var o = function () { var e = a.value, t = null === q || void 0 === q ? void 0 : q.find((function (t) { return t.groupId === e })); h.push(t) }; for (r.s(); !(a = r.n()).done;)o() } catch (i) { r.e(i) } finally { r.f() } X(Q(h)) } }), [q]), Object(a.useEffect)((function () { D.a.get("https://enigmatic-garden-12643.herokuapp.com/users/singleuser/".concat(x)).then((function (e) { o(e.data), I(!1) })) }), [ee, H]), Object(a.useEffect)((function () { var e = m("picFile"); if (null !== e && void 0 !== e && e.length) { M(!0); var t = new FormData; t.set("key", "752d2bbd9a2e4d6a5910df9c191e1643"), t.append("image", e[0]), D()({ method: "post", url: "https://api.imgbb.com/1/upload", data: t }).then((function (e) { B(e.data.data.url), M(!1) })) } }), [m("picFile")]); var de = function () { var e = Object(C.a)(U.a.mark((function e() { return U.a.wrap((function (e) { for (; ;)switch (e.prev = e.next) { case 0: if (null !== P && "" !== P) { e.next = 2; break } return e.abrupt("return"); case 2: if (n.uid) { e.next = 4; break } return e.abrupt("return"); case 4: return te(!0), e.next = 7, D.a.put("https://enigmatic-garden-12643.herokuapp.com/users/updateprofile/".concat(n.uid), { photoURL: P }).then((function () { R(W.displayName, P), te(!1) })); case 7: case "end": return e.stop() } }), e) }))); return function () { return e.apply(this, arguments) } }(), be = { borderBottom: "1px solid #4E426D", fontWeight: 500, color: "black" }, pe = { borderColor: "whitesmoke", display: "block", color: "whitesmoke", "&:hover": { borderColor: "whitesmoke" } }; return Object(re.jsxs)(u.a, { id: "setting_page", children: [S ? Object(re.jsx)(j.a, { variant: "h6", sx: { p: 3, color: "whitesmoke" }, children: "Loading..." }) : Object(re.jsx)(gt.a, { sx: { pt: 15, color: "#fff" }, children: Object(re.jsxs)(d.a, { container: !0, children: [Object(re.jsxs)(d.a, { item: !0, xs: 12, md: 4, lg: 3, xl: 2.5, sm: 4, sx: { boxShadow: 3, background: "#5C4F81" }, children: [Object(re.jsxs)("span", { style: { display: "grid", justifyContent: "center" }, children: [Object(re.jsx)(y.a, { src: null === n || void 0 === n ? void 0 : n.photoURL, alt: null === n || void 0 === n ? void 0 : n.displayName, sx: { width: 90, height: 90, mt: 2 } }), Object(re.jsx)(je.a, { sx: { background: "#463A63", color: "#fff", "&:hover": { background: "#463A63" }, mt: -3, ml: 7 }, onClick: function () { return ie(!0) }, component: "span", children: Object(re.jsx)(Dt.a, { sx: { fontSize: 15 } }) })] }), Object(re.jsx)(j.a, { variant: "h6", sx: { textAlign: "center", fontSize: 18, letterSpacing: 1, mt: 1, borderBottom: "3px solid #4E426D", pb: 1 }, children: null === n || void 0 === n ? void 0 : n.displayName }), Object(re.jsxs)(yt.a, { orientation: "vertical", variant: "scrollable", value: b, onChange: function (e, t) { p(t) }, "aria-label": "Vertical tabs example", sx: { mt: 1 }, children: [Object(re.jsx)(kt.a, Object(ue.a)({ sx: be, label: "Contract Info" }, ce(0))), Object(re.jsx)(kt.a, Object(ue.a)({ sx: be, label: "My Contracts" }, ce(1))), Object(re.jsx)(kt.a, Object(ue.a)({ sx: be, label: "joined groups" }, ce(2))), Object(re.jsx)(kt.a, Object(ue.a)({ sx: be, label: "Account Setting" }, ce(3))), H && Object(re.jsx)(j.a, { variant: "body2", sx: { m: 1 }, children: "Loading..." })] })] }), Object(re.jsxs)(d.a, { item: !0, xs: 12, sm: 8, md: 8, xl: 6, sx: { boxShadow: 3, background: "#5C4F81" }, children: [Object(re.jsx)(Rt, { value: b, index: 0, children: Object(re.jsx)(Ct, { user: n }) }), Object(re.jsx)(Rt, { value: b, index: 1, children: Object(re.jsx)(Ut, {}) }), Object(re.jsx)(Rt, { value: b, index: 2, children: Object(re.jsx)(St, {}) }), Object(re.jsx)(Rt, { value: b, index: 3, children: "Item Four" })] })] }) }), Object(re.jsx)(Ie.a, { open: oe, "aria-labelledby": "modal-modal-title", "aria-describedby": "modal-modal-description", children: Object(re.jsxs)(u.a, { sx: Nt, children: [Object(re.jsx)(u.a, { sx: { display: "flex", justifyContent: "center" }, children: "" === P && !_ && Object(re.jsxs)("label", { htmlFor: "icon-button-file", children: [Object(re.jsx)("input", Object(ue.a)(Object(ue.a)({ style: { display: "none" } }, v("picFile")), {}, { accept: "image/*", type: "file", id: "icon-button-file" })), Object(re.jsx)(je.a, { sx: { background: "#463A63", color: "#fff", "&:hover": { background: "#463A63" }, width: 100, height: 100, mb: 2 }, color: "primary", "aria-label": "upload picture", component: "span", children: Object(re.jsx)(Dt.a, { sx: { fontSize: 25 } }) })] }) }), Object(re.jsx)(u.a, { sx: { display: "flex", justifyContent: "center" }, children: _ && "" === P && Object(re.jsx)(le.a, { sx: { mb: 2 }, variant: "circular", width: 110, height: 110 }) }), Object(re.jsx)(u.a, { sx: { display: "flex", justifyContent: "center" }, children: "" !== P && Object(re.jsx)(y.a, { sx: { width: 110, height: 110, mb: 2 }, src: P, alt: "yourImage" }) }), Object(re.jsxs)(u.a, { id: "updateButton_container", children: [ee ? Object(re.jsx)(se.a, { disabled: !0, variant: "outlined", sx: pe, children: "Loading..." }) : Object(re.jsx)(se.a, { onClick: de, variant: "outlined", sx: pe, children: "UPDATE" }), Object(re.jsx)(se.a, { onClick: function () { B(""), te(!1), M(!1) }, disabled: !!ee, variant: "outlined", sx: pe, children: "CANCEL" }), Object(re.jsx)(se.a, { onClick: function () { ie(!1), setTimeout((function () { return B("") }), 1e3) }, sx: pe, variant: "outlined", children: "CLOSE" })] })] }) })] }) } var At = function () { var e = Object(a.useRef)(null), t = ye(), n = t.reseatPassword, r = t.processing; return Object(re.jsx)(re.Fragment, { children: Object(re.jsx)(u.a, { sx: { display: "flex", justifyContent: "center", alignItems: "center", height: "100vh" }, children: Object(re.jsx)(u.a, { sx: { width: { md: 300 }, boxShadow: 2 }, children: Object(re.jsxs)("form", { className: "resetpass_field", onSubmit: function (t) { t.preventDefault(), n(e.current.value) }, children: [Object(re.jsx)(j.a, { sx: { mb: 1, color: "whitesmoke" }, variant: "body2", children: "Note:- Please give this email which you used on login and now you dunno this password. Otherwise passworld will be not change." }), Object(re.jsx)("input", { placeholder: "Enter email *", ref: e, required: !0, type: "email" }), r ? Object(re.jsx)("button", { disabled: !0, children: "Loading..." }) : Object(re.jsx)("button", { type: "submit", children: "  SEND" })] }) }) }) }) }, Ft = function () { var e = w((function (e) { return null === e || void 0 === e ? void 0 : e.data })).loginUser, t = (Object(me.g)(), k()); Object(a.useRef)(); return Object(a.useEffect)((function () { t(L()), t(R()) }), [e]), Object(re.jsx)(re.Fragment, { children: Object(re.jsxs)(me.d, { children: [Object(re.jsx)(me.b, { path: "/", element: Object(re.jsx)(mt, { children: Object(re.jsx)(xt, {}) }) }), Object(re.jsx)(me.b, { path: "/login", element: Object(re.jsx)(vt, {}) }), Object(re.jsx)(me.b, { path: "/reseatpass", element: Object(re.jsx)(At, {}) }), Object(re.jsx)(me.b, { path: "/setting/:userId", element: Object(re.jsx)(Lt, {}) })] }) }) }, _t = Object(E.a)({ reducer: { data: te } }), Mt = n(97); i.a.render(Object(re.jsx)(r.a.StrictMode, { children: Object(re.jsxs)(c.a, { store: _t, children: [Object(re.jsx)(Mt.a, { children: Object(re.jsx)(Ft, {}) }), ","] }) }), document.getElementById("root")) } }, [[565, 1, 2]]]);
//# sourceMappingURL=main.b6ef31a5.chunk.js.map